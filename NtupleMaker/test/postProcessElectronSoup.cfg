# -*-sh-*-
process D  = {

    service  = Timing {}

    untracked PSet maxEvents = {untracked int32 input = -1}

    untracked PSet options = {
	untracked vstring Rethrow = {"ProductNotFound"}
    }
    
    source = PoolSource {
	untracked vstring fileNames = {'file:/uscms_data/d1/fgolf/sntuples/soups/topDileptonMuonX/ntuple_soup_1.root' }
	untracked uint32 skipEvents = 0
    }

    service = MessageLogger {
	untracked vstring destinations = { "cerr" }
	untracked PSet cerr = { untracked string threshold = "INFO"    } 
    }  

    include "CMS2/NtupleMaker/data/eventWeights.cfi"
    include "CMS2/NtupleMaker/data/duplicateFilter.cfi"

    include "CMS2/NtupleMaker/data/duplicates.list"

    sequence event = {
	eventWeights
    }
    
    replace eventWeights.topDilepton2Electron_nevts = 629013
    replace eventWeights.IsTopDilepton2Electron = true
    replace eventWeights.IsTopDileptonMuonX = false

    module outMod = PoolOutputModule {
	untracked string fileName = 'ntuple_soup.root'
	untracked vstring outputCommands = {
	    "drop *", 
	    "keep *_*_*_B",
	    "keep *_eventWeights_*_D"
	}
    }

    path p = { 
	event
    }
    
    endpath outpath = { duplicateFilter, outMod }
}
